<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <h1>Gretta Beauty Salon</h1>
      <h2>Crear Cuenta</h2>
      <p>Completa tus datos para registrarte</p>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      @if (errorMessage) {
        <div class="alert alert-error">{{ errorMessage }}</div>
      }
      @if (successMessage) {
        <div class="alert alert-success">{{ successMessage }}</div>
      }

      <div class="form-row">
        <div class="form-group">
          <label>Nombre *</label>
          <input type="text" formControlName="nombre" placeholder="Tu nombre" 
                 [class.invalid]="registerForm.get('nombre')?.invalid && registerForm.get('nombre')?.touched" />
          @if (registerForm.get('nombre')?.invalid && registerForm.get('nombre')?.touched) {
            <small class="error-text">El nombre es obligatorio (m√≠nimo 2 caracteres)</small>
          }
        </div>
        <div class="form-group">
          <label>Apellido *</label>
          <input type="text" formControlName="apellido" placeholder="Tu apellido"
                 [class.invalid]="registerForm.get('apellido')?.invalid && registerForm.get('apellido')?.touched" />
          @if (registerForm.get('apellido')?.invalid && registerForm.get('apellido')?.touched) {
            <small class="error-text">El apellido es obligatorio (m√≠nimo 2 caracteres)</small>
          }
        </div>
      </div>

      <div class="form-group">
        <label>Correo Electr√≥nico *</label>
        <input type="email" formControlName="correo" placeholder="ejemplo@correo.com"
               [class.invalid]="registerForm.get('correo')?.invalid && registerForm.get('correo')?.touched" />
        @if (registerForm.get('correo')?.invalid && registerForm.get('correo')?.touched) {
          <small class="error-text">Ingresa un correo electr√≥nico v√°lido</small>
        }
      </div>

      <div class="form-group">
        <label>Tel√©fono *</label>
        <input type="tel" formControlName="telefono" placeholder="+57 300 1234567"
               [class.invalid]="registerForm.get('telefono')?.invalid && registerForm.get('telefono')?.touched" />
        @if (registerForm.get('telefono')?.invalid && registerForm.get('telefono')?.touched) {
          <small class="error-text">Ingresa un tel√©fono v√°lido (solo n√∫meros, +, -, espacios, par√©ntesis)</small>
        }
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Tipo Documento *</label>
          <select formControlName="tipoDocumento">
            @for (tipo of tiposDocumento; track tipo.value) {
              <option [value]="tipo.value">{{ tipo.label }}</option>
            }
          </select>
        </div>
        <div class="form-group">
          <label>N√∫mero Documento *</label>
          <input type="text" formControlName="numeroDocumento" placeholder="123456789"
                 [class.invalid]="registerForm.get('numeroDocumento')?.invalid && registerForm.get('numeroDocumento')?.touched" />
          @if (registerForm.get('numeroDocumento')?.invalid && registerForm.get('numeroDocumento')?.touched) {
            <small class="error-text">El n√∫mero de documento es obligatorio</small>
          }
        </div>
      </div>

      <div class="form-group">
        <label>Contrase√±a *</label>
        <div class="password-input">
          <input
            [type]="hidePassword ? 'password' : 'text'"
            formControlName="contrasena"
            placeholder="M√≠nimo 6 caracteres"
            [class.invalid]="registerForm.get('contrasena')?.invalid && registerForm.get('contrasena')?.touched"
          />
          <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
            {{ hidePassword ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è' }}
          </button>
        </div>
        @if (registerForm.get('contrasena')?.invalid && registerForm.get('contrasena')?.touched) {
          <small class="error-text">La contrase√±a debe tener al menos 6 caracteres</small>
        }
      </div>

      <div class="form-group">
        <label>Rol</label>
        <select formControlName="rol">
          @for (rol of roles; track rol.value) {
            <option [value]="rol.value">{{ rol.label }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label>Canal Preferido</label>
        <select formControlName="canalPreferido">
          @for (canal of canalesPreferidos; track canal.value) {
            <option [value]="canal.value">{{ canal.label }}</option>
          }
        </select>
      </div>

      @if (isEstilista) {
        <div class="form-group">
          <label>Especialidad *</label>
          <input type="text" formControlName="especialidad" placeholder="Ej: Colorimetr√≠a, Cortes"
                 [class.invalid]="registerForm.get('especialidad')?.invalid && registerForm.get('especialidad')?.touched" />
          @if (registerForm.get('especialidad')?.invalid && registerForm.get('especialidad')?.touched) {
            <small class="error-text">La especialidad es obligatoria para estilistas</small>
          }
        </div>
        <div class="form-group">
          <label>Disponibilidad *</label>
          <input type="text" formControlName="disponibilidad" placeholder="Lun-Vie 9AM-6PM"
                 [class.invalid]="registerForm.get('disponibilidad')?.invalid && registerForm.get('disponibilidad')?.touched" />
          @if (registerForm.get('disponibilidad')?.invalid && registerForm.get('disponibilidad')?.touched) {
            <small class="error-text">La disponibilidad es obligatoria para estilistas</small>
          }
        </div>
      }

      <button type="submit" class="btn-primary" [disabled]="loading">
        {{ loading ? 'Registrando...' : 'Crear Cuenta' }}
      </button>

      <div class="form-footer">
        <p>¬øYa tienes cuenta? <a routerLink="/login">Inicia sesi√≥n aqu√≠</a></p>
      </div>
    </form>
  </div>
</div>
