<div class="dashboard-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h2>Gretta Admin</h2>
      <p>Panel de Estilista</p>
    </div>
    
    <nav class="sidebar-nav">
      <ul>
        <li [class.active]="currentView === 'resumen'" (click)="setView('resumen')">
          <i class="fas fa-home"></i> Resumen
        </li>
        <li [class.active]="currentView === 'usuarios'" (click)="setView('usuarios')">
          <i class="fas fa-users"></i> Usuarios
        </li>
        <li [class.active]="currentView === 'citas'" (click)="setView('citas')">
          <i class="fas fa-calendar-alt"></i> Citas
        </li>
        <li [class.active]="currentView === 'servicios'" (click)="setView('servicios')">
          <i class="fas fa-cut"></i> Servicios
        </li>
        <li [class.active]="currentView === 'promociones'" (click)="setView('promociones')">
          <i class="fas fa-tags"></i> Promociones
        </li>
        <li [class.active]="currentView === 'productos'" (click)="setView('productos')">
          <i class="fas fa-box-open"></i> Productos
        </li>
        <li [class.active]="currentView === 'ventas'" (click)="setView('ventas')">
          <i class="fas fa-shopping-cart"></i> Ventas
        </li>
      </ul>
    </nav>

    <div class="sidebar-footer">
      <button class="logout-btn" (click)="logout()">
        <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <header class="top-bar">
      <h1>{{ getTitle() }}</h1>
      <div class="user-info">
        <span>Bienvenido, Estilista</span>
        <div class="avatar">E</div>
      </div>
    </header>

    <div class="content-area">
      
      <!-- Vista Resumen -->
      <div *ngIf="currentView === 'resumen'" class="dashboard-cards">
        <div class="card">
          <h3>Citas Hoy</h3>
          <p class="number">8</p>
        </div>
        <div class="card">
          <h3>Usuarios Activos</h3>
          <p class="number">120</p>
        </div>
        <div class="card">
          <h3>Ventas del Mes</h3>
          <p class="number">$2.5M</p>
        </div>
      </div>

      <!-- Vista Genérica para Tablas (CRUD) -->
      <div *ngIf="currentView !== 'resumen'" class="crud-container">
        <div class="crud-actions">
          <button class="btn-add" (click)="crearNuevo()">
            <i class="fas fa-plus"></i> Nuevo
          </button>
          <div class="search-box">
            <input type="text" placeholder="Buscar...">
            <i class="fas fa-search"></i>
          </div>
        </div>

        <div class="table-responsive">
          <table class="crud-table">
            <thead>
              <tr>
                <th *ngFor="let col of getColumns()">{{ col.label }}</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngIf="loading">
                <td [attr.colspan]="getColumns().length + 1" style="text-align: center; padding: 2rem;">
                  <i class="fas fa-spinner fa-spin"></i> Cargando datos...
                </td>
              </tr>
              <tr *ngIf="!loading && data.length === 0">
                <td [attr.colspan]="getColumns().length + 1" style="text-align: center; padding: 2rem;">
                  No hay registros disponibles.
                </td>
              </tr>
              <tr *ngFor="let item of data">
                <td *ngFor="let col of getColumns()">
                  {{ item[col.key] }}
                </td>
                <td class="actions">
                  <button class="btn-icon edit" (click)="editarItem(item)"><i class="fas fa-edit"></i></button>
                  <button class="btn-icon delete" (click)="eliminarItem(item)"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </main>

  <!-- Modal Genérico -->
  <div class="modal-overlay" *ngIf="showModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>{{ modalTitle }}</h3>
        <button class="close-btn" (click)="closeModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="guardarItem()">
          <div class="form-group" *ngFor="let field of getFormFields()">
            <label>{{ field.label }}</label>
            <input [type]="field.type" [(ngModel)]="selectedItem[field.key]" [name]="field.key" class="form-control">
          </div>
          
          <div class="modal-footer">
            <button type="button" class="btn-cancel" (click)="closeModal()">Cancelar</button>
            <button type="submit" class="btn-save">Guardar</button>
          </div>
        </form>
      </div>
    </div>
  </div>

</div>
